apiVersion: deployments.kuberik.com/v1alpha1
kind: Deployment
metadata:
  name: deployment-sample
  namespace: default
spec:
  # Reference to the Rollout that this Deployment manages
  rolloutRef:
    name: myapp-rollout

  # Backend configuration
  backend: "github"

  # GitHub repository configuration
  repository: "myorg/myapp"
  deploymentName: "myapp-production"
  environment: "production"
  ref: "main"

  # Relationship configuration
  relationship:
    type: "after"
    environments:
      - "staging"
      - "testing"

  requiredContexts:
    - "ci"
    - "security-scan"

  # GitHub token configuration
  githubTokenSecret: "github-token"
